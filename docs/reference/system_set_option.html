<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Setting Analysis Options — system_set_option • ubiquity</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Setting Analysis Options — system_set_option"><meta name="description" content="Different options associated performing analyses (e.g running
simulations, performing parameter estimation, logging, etc.) can be set
with this function"><meta property="og:description" content="Different options associated performing analyses (e.g running
simulations, performing parameter estimation, logging, etc.) can be set
with this function"><meta property="og:image" content="https://r.ubiquity.tools/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ubiquity</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-chalkboard-teacher"></span> Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/Simulation.html">Individual and Population Simulations</a></li>
    <li><a class="dropdown-item" href="../articles/Language.html">ubiquity Modeling Language</a></li>
    <li><a class="dropdown-item" href="../articles/Estimation.html">Naive-Pooled Parameter Estimation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other Analysis Options</h6></li>
    <li><a class="dropdown-item" href="../articles/Deployment.html">Deploying Your Models in a Shiny App</a></li>
    <li><a class="dropdown-item" href="../articles/Titration.html">Trial/Rule-Based Simulations</a></li>
    <li><a class="dropdown-item" href="../articles/In_Vitro.html">Estimation of In Vitro/Static Systems</a></li>
    <li><a class="dropdown-item" href="../articles/NCA.html">Non-Compartmental Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/Reporting.html">Integrated Word and PowerPoint Reporting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>More Help</h6></li>
    <li><a class="dropdown-item" href="../articles/Howto.html">Howtos</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-screencasts" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-video"></span> Screencasts</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-screencasts"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Modeling</h6></li>
    <li><a class="external-link dropdown-item" href="https://vimeo.com/382859445">Individual and Population Simulations</a></li>
    <li><a class="external-link dropdown-item" href="https://vimeo.com/382860283">Model Deployment</a></li>
    <li><a class="external-link dropdown-item" href="https://vimeo.com/manage/videos/382829588">Naive-Pooled Parameter Estimation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other Tools</h6></li>
    <li><a class="external-link dropdown-item" href="https://vimeo.com/650643574">Tabula: Extracting Tabular Data from PDFs</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fas fa-hat-wizard"></span> Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fas fa-rss"></span> News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/john-harrold/ubiquity/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Setting Analysis Options</h1>
      <small class="dont-index">Source: <a href="https://github.com/john-harrold/ubiquity/blob/HEAD/R/ubiquity.R" class="external-link"><code>R/ubiquity.R</code></a></small>
      <div class="d-none name"><code>system_set_option.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Different options associated performing analyses (e.g running
simulations, performing parameter estimation, logging, etc.) can be set
with this function</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">system_set_option</span><span class="op">(</span><span class="va">cfg</span>, <span class="va">group</span>, <span class="va">option</span>, <span class="va">value</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cfg">cfg<a class="anchor" aria-label="anchor" href="#arg-cfg"></a></dt>
<dd><p>ubiquity system object</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>options are grouped together by the underlying activity being performed: "estimation",  "general", "logging", "simulation", "solver", "stochastic", or "titration"</p></dd>


<dt id="arg-option">option<a class="anchor" aria-label="anchor" href="#arg-option"></a></dt>
<dd><p>for each group there are a set of options</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>corresponding value for the option</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Ubiquity system object with the option set</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><b><code>group="estimation"</code></b></p>
<p>The default estimation in R is performed using either the <code>optim</code> or <code>optimx</code> libraries.
This is selected by setting the <code>optimizer</code> option:</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"optimizer"</span>,</span>
<span>                       value  <span class="op">=</span> <span class="st">"optim"</span><span class="op">)</span></span></code></pre></div>

<p>The optimization routine then specified using the <code>method</code>. By default this <code>option</code> is
set to <code>Nelder-Mead</code>.</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"method"</span>,</span>
<span>                       value  <span class="op">=</span> <span class="st">"Nelder-Mead"</span><span class="op">)</span></span></code></pre></div>

<p>And different attributes are then selected using the control.</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"control"</span>,</span>
<span>                       value  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>trace  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                     maxit  <span class="op">=</span> <span class="fl">500</span>,</span>
<span>                                     REPORT <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>For the different methods and control options, see the documentation for the <code>optim</code>
and <code>optimx</code> libraries.</p>
<p>To perform a global optimization you can install either the particle swarm (<code>pso</code>),
genetic algorithm (<code>GA</code>), flexible modeling environment (<code>FME</code>),
parallel particle swarm (<code>ppso</code>), or  doPrallel particle swarm
optimization (<code>parallelPSO</code>) libraries.</p>
<p>To use the particle swarm set the <code>optimizer</code> and <code>method</code>:</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">pso</span><span class="op">)</span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"optimizer"</span>,</span>
<span>                       value  <span class="op">=</span> <span class="st">"pso"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"method"</span>,</span>
<span>                       value  <span class="op">=</span> <span class="st">"psoptim"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                          option <span class="op">=</span> <span class="st">"control"</span>,</span>
<span>                          value  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>trace  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                        maxit  <span class="op">=</span> <span class="fl">200</span>,</span>
<span>                                        REPORT <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>The control option is a list described <code>pso</code> documentation.</p>
<p>To use the genetic algorithm set the optimizer and method:</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://luca-scr.github.io/GA/" class="external-link">GA</a></span><span class="op">)</span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"optimizer"</span>,</span>
<span>                       value  <span class="op">=</span> <span class="st">"ga"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"method"</span>,</span>
<span>                       value  <span class="op">=</span> <span class="st">"ga"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                          option <span class="op">=</span> <span class="st">"control"</span>,</span>
<span>                          value  <span class="op">=</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>maxiter   <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>        optimArgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>method  <span class="op">=</span> <span class="st">"Nelder-Mead"</span>,</span>
<span>                         maxiter <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>The control option is a list and the list elements are the named options in the GA
documentation. Use the following as an example:</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"control"</span>,</span>
<span>                       value  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>maxiter  <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>                                    optimArgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                                      method  <span class="op">=</span> <span class="st">"Nelder-Mead"</span>,</span>
<span>                                      maxiter <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>To use the Markov Chain Monte Carlo method in <code>FME</code> start with the following settings:</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://fme.r-forge.r-project.org/" class="external-link">FME</a></span><span class="op">)</span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                             option <span class="op">=</span> <span class="st">"optimizer"</span>,</span>
<span>                             value  <span class="op">=</span> <span class="st">"fme"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                             option <span class="op">=</span> <span class="st">"method"</span>,</span>
<span>                             value  <span class="op">=</span> <span class="st">"modMCMC"</span><span class="op">)</span></span>
<span></span></code></pre></div>

<p>The control option here represents the arguments passed to the method above
see the help for the method for valid options. Note that the following options
are set internally and shouldn't be specified here: f, p, lower and upper</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                             option <span class="op">=</span> <span class="st">"control"</span>,</span>
<span>                             value  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                               burninlength              <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                               niter                     <span class="op">=</span> <span class="fl">500</span><span class="op">)</span><span class="op">)</span><span class="co">#'</span></span>
<span></span></code></pre></div>

<p>To use the parallel particle swarm <code>ppso</code> set the optimizer and method:</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ppso</span><span class="op">)</span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                             option <span class="op">=</span> <span class="st">"optimizer"</span>,</span>
<span>                             value  <span class="op">=</span> <span class="st">"ppso"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                             option <span class="op">=</span> <span class="st">"method"</span>,</span>
<span>                             value  <span class="op">=</span> <span class="st">"optim_pso"</span><span class="op">)</span></span></code></pre></div>

<p>These are the other methods in the pppso package:
optim_pso_robust, optim_dds, optim_pdds_robust</p>
<p>The control option here represents the arguments passed to the method above
see the help for the method for valid options. Note that the following options
are set internally and shouldn't be specified here:  objective_function,
 number_of_parameters, parameter_bounds, initial_estimates</p>
<p>To utlize the parallelization you need to install and configure the Rmpi package.</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                             option <span class="op">=</span> <span class="st">"control"</span>,</span>
<span>                             value  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                               max_number_function_calls <span class="op">=</span> <span class="fl">50000</span>,</span>
<span>                               max_number_of_iterations  <span class="op">=</span> <span class="fl">50000</span>,</span>
<span>                               number_of_particles       <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>Note that <code>ppso</code> is not available on CRAN and must be installed off of
the <a href="https://github.com/TillF/ppso" class="external-link">ppso github page</a>.</p>

<p>To use the doParallel particle swarm <code>parallelPSO</code> set the optimizer and method:</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">parallelPSO</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RevolutionAnalytics/doparallel" class="external-link">doParallel</a></span><span class="op">)</span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                            option <span class="op">=</span> <span class="st">"optimizer"</span>,</span>
<span>                            value  <span class="op">=</span> <span class="st">"parallelpso"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                            option <span class="op">=</span> <span class="st">"method"</span>,</span>
<span>                            value  <span class="op">=</span> <span class="st">"pso"</span><span class="op">)</span></span>
<span></span></code></pre></div>

<p>The control option here represents the arguments passed to the method above
see the help for the method for valid options. Note that the following options
are set internally and shouldn't be specified here: fitness_function,
number_parameters, parameters_bounds</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                            option <span class="op">=</span> <span class="st">"control"</span>,</span>
<span>                            value  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                              max_number_iterations  <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                              number_of_partiples    <span class="op">=</span> <span class="fl">40</span>,</span>
<span>                              parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span></code></pre></div>

<p>The number of cores are set using the comput_cores simulation option:</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"simulation"</span>,</span>
<span>                          option <span class="op">=</span> <span class="st">"compute_cores"</span>,</span>
<span>                          value  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span></code></pre></div>

<p>Note that <code>parallelPSO</code> is not available on CRAN and must be installed off of
the <a href="https://github.com/john-harrold/parallelPSO" class="external-link">this forked github page</a>.</p>

<p>To alter initial guesses see: <code><a href="system_set_guess.html">system_set_guess</a></code></p>
<p>When performing parameter estimation, the internal function
<code>system_od_general</code> is used. This is the function that simulates your
system at the conditions defined for the different cohorts. This is pretty
flexible but if you want to go beyond this you can set the
<code>observation_function</code> option:</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"observation_function"</span>,</span>
<span>                       value  <span class="op">=</span> <span class="st">"my_od"</span><span class="op">)</span></span></code></pre></div>

<p>That will instruct the optimziation routines to use the user defined
function <code>my_od</code>. You will need to construct that function to have the
same input/output format as <code><a href="system_od_general.html">system_od_general</a></code>.</p>
<p><b><code>group=general</code></b></p>
<ul><li><p><code>"output_directory"</code>   = String where analysis outputs will be
    placed. Generally you wont want to change this, but it can be useful in Shiny
    apps where you need to have each shiny user generate output in that
    users directory : <code>file.path(".", "output")</code></p></li>
</ul><p><b><code>group=logging</code></b></p>
<p>By default ubiquity prints different information to the console and logs this
information to a log file. The following options can be used to control
this behavior:</p>
<ul><li><p><code>"enabled"</code>   = Boolean variable to control logging: <code>TRUE</code></p></li>
<li><p><code>"file"</code>      = String containing the name of the log file: <code>file.path("transient", "ubiquity_log.txt")</code></p></li>
<li><p><code>"timestamp"</code> = Boolean switch to control appending a time stamp to log entries: <code>TRUE</code></p></li>
<li><p><code>"ts_str"</code>    = String format of timestamp: "<!-- %Y-%m-%d %H:%M:%S" --></p></li>
<li><p><code>"debug"</code>     = Boolean switch to control debugging (see below): <code>FALSE</code></p></li>
<li><p><code>"verbose"</code>   = Boolean switch to control printing to the console <code>FALSE</code></p></li>
</ul><p>To enable debugging of different functions (like when performing esitmation),
set the <code>debug</code> option to <code>TRUE</code>. Important function calls will be
trapped and information will be logged and reported to the console.</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"estimation"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"debug"</span>,</span>
<span>                       value  <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>

<p><b><code>group="simulation"</code></b></p><ul><li><p><code>"dynamic"</code> - Set to <code>TRUE</code> (default) and simulations will behave normally. Set to <code>FALSE</code> and ODES will evaulate to zero. This is useful for steady-state anslysis.</p></li>
<li><p><code>"include_important_output_times"</code> - Automatically add bolus, infusion rate switching times, etc: <code>"yes"</code>(default), <code>"no"</code>.</p></li>
<li><p><code>"integrate_with"</code> - Specify if the ODE solver should use the Rscript (<code>"r-file"</code>) or compiled C (<code>"c-file"</code>), if the build process can compile and load the C version it will be the default otherwise it will switch over to the R script.</p></li>
<li><p><code>"output_times"</code> - Vector of times to evaulate the simulation (default <code>seq(0,100,1)</code>).</p></li>
<li><p><code>"solver"</code> - Selects the ODE solver: <code>"lsoda"</code> (default), <code>"lsode"</code>, <code>"vode"</code>, etc.; see the documentation for <code><a href="https://rdrr.io/pkg/deSolve/man/deSolve.html" class="external-link">deSolve</a></code> for an exhaustive list.</p></li>
<li><p><code>"sample_bolus_delta"</code> - Spacing used when sampling around bolus events (default <code>1e-6</code>).</p></li>
<li><p><code>"sample_forcing_delta"</code> - Spacing used when sampling around forcing functions (infusion rates, covariates, etc) (default <code>1e-3</code>).</p></li>
</ul><p><b><code>group=solver</code></b></p>
<p>Depending on the solver, different options can be set. The documentation
for  <code><a href="https://rdrr.io/pkg/deSolve/man/deSolve.html" class="external-link">deSolve</a></code> lists the different solvers. For a full list of options, see the
documentation for the specific solver (e.g. <code>?lsoda</code>). Some common options
to consider are:</p><ul><li><p><code>"atol"</code> - Relative error tolerance</p></li>
<li><p><code>"rtol"</code> - Absolute error tolerance</p></li>
<li><p><code>"hmin"</code> - Minimum integration step size</p></li>
<li><p><code>"hmax"</code> - Maximum integration step size</p></li>
</ul><p>To select the <code>vode</code> solver and set the maximum step size to 0.01, the
following would be used:</p><div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                     group  <span class="op">=</span> <span class="st">"simulation"</span>,</span>
<span>                     option <span class="op">=</span> <span class="st">"solver"</span>,</span>
<span>                     value  <span class="op">=</span> <span class="st">"vode"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                     group  <span class="op">=</span> <span class="st">"solver"</span>,</span>
<span>                     option <span class="op">=</span> <span class="st">"hmax"</span>,</span>
<span>                     value  <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span></code></pre></div>

<p><b><code>group="stochastic"</code></b></p>
<p>When running stochastic simulations (inter-individual variability applied to system
parameters) it can be useful to specify the following:</p><ul><li><p><code>"ci"</code> - Confidence interval (default <code>95</code>)</p></li>
<li><p><code>"nsub"</code> - Number of subjects (default <code>100</code>)</p></li>
<li><p><code>"seed"</code> - Seed for the random numebr generator (default <code>8675309</code>)</p></li>
<li><p><code>"ponly"</code> - Only generate the subject parameters but do not run the simulations (default <code>FALSE</code>)</p></li>
<li><p><code>"ssp"</code> - A list of the calculated static secondary parameters to include (default all parameters defined by <code>&lt;As&gt;</code>)</p></li>
<li><p><code>"outputs"</code> - A list of the predicted outputs to include (default all outputs defined by <code>&lt;O&gt;</code>)</p></li>
<li><p><code>"states"</code> - A list of the predicted states to include(default all states)</p></li>
<li><p><code>"sub_file"</code> - Name of data set loaded with (<code><a href="system_load_data.html">system_load_data</a></code>) containing subject level parameters and coviariates</p></li>
<li><p><code>"sub_file_sample"</code> - Controls how subjects are sampled from the dataset</p></li>
</ul><p>If you wanted to generate <code>1000</code> subjects but only wanted the parameters, you would
use the following:</p><div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"stochastic"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"nsub "</span>,</span>
<span>                       value  <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                       group  <span class="op">=</span> <span class="st">"stochastic"</span>,</span>
<span>                       option <span class="op">=</span> <span class="st">"ponly"</span>,</span>
<span>                       value  <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span></span></code></pre></div>


<p>If you wanted to exclude both states and secondary parameters, while only including
the output <code>Cp_nM</code>, you would do the following:</p><div class="sourceCode"><pre><code><span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span> <span class="op">(</span><span class="va">cfg</span>,</span>
<span>                        group  <span class="op">=</span> <span class="st">"stochastic"</span>,</span>
<span>                        option <span class="op">=</span> <span class="st">"ssp"</span>,</span>
<span>                        value  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span> <span class="op">(</span><span class="va">cfg</span>,</span>
<span>                        group  <span class="op">=</span> <span class="st">"stochastic"</span>,</span>
<span>                        option <span class="op">=</span> <span class="st">"states"</span>,</span>
<span>                        value  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span> <span class="op">(</span><span class="va">cfg</span>,</span>
<span>                        group  <span class="op">=</span> <span class="st">"stochastic"</span>,</span>
<span>                        option <span class="op">=</span> <span class="st">"outputs"</span>,</span>
<span>                        value  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Cp_nM"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>To pull subject information from a data file instead of generating the subject
parameters from IIV information the <code>sub_file</code> option can be used. The value here
<code>SUBFILE_NAME</code> is the name given to a dataset loaded with
(<code><a href="system_load_data.html">system_load_data</a></code>):</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                     group  <span class="op">=</span> <span class="st">"stochastic"</span>,</span>
<span>                     option <span class="op">=</span> <span class="st">"sub_file"</span>,</span>
<span>                     value  <span class="op">=</span> <span class="st">"SUBFILE_NAME"</span><span class="op">)</span></span></code></pre></div>

<p>Sampling from the dataset can be controlled using the <code>sub_file_sample</code> option:</p>
<div class="sourceCode"><pre><code><span></span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                     group  <span class="op">=</span> <span class="st">"stochastic"</span>,</span>
<span>                     option <span class="op">=</span> <span class="st">"sub_file_sample"</span>,</span>
<span>                     value  <span class="op">=</span> <span class="st">"with replacement"</span><span class="op">)</span></span></code></pre></div>

<p>Sampling can be done sequentially (<code>"sequential"</code>), with replacement
(<code>"with replacement"</code>), or without replacement (<code>"without replacement"</code>)</p>
<p><b><code>group="titration"</code></b></p>
<p><code>"titrate"</code> - By default titration is disable (set to <code>FALSE</code>). If you are
going to use titration, enable it here by setting this option to <code>TRUE</code>.
This will force #' <code><a href="simulate_subjects.html">simulate_subjects</a></code> to use
<code><a href="run_simulation_titrate.html">run_simulation_titrate</a></code> internally when running simulations.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Harrold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

