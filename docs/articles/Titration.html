<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Titration/Rule-Based Simulations â€¢ ubiquity</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><link href="../deps/KaTex-0.16.10/katex.min.css" rel="stylesheet">
<script src="../deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Titration/Rule-Based Simulations">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ubiquity</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-chalkboard-teacher"></span> Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/Simulation.html">Individual and Population Simulations</a></li>
    <li><a class="dropdown-item" href="../articles/Language.html">ubiquity Modeling Language</a></li>
    <li><a class="dropdown-item" href="../articles/Estimation.html">Naive-Pooled Parameter Estimation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other Analysis Options</h6></li>
    <li><a class="dropdown-item" href="../articles/Deployment.html">Deploying Your Models in a Shiny App</a></li>
    <li><a class="dropdown-item" href="../articles/Titration.html">Trial/Rule-Based Simulations</a></li>
    <li><a class="dropdown-item" href="../articles/In_Vitro.html">Estimation of In Vitro/Static Systems</a></li>
    <li><a class="dropdown-item" href="../articles/NCA.html">Non-Compartmental Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/Reporting.html">Integrated Word and PowerPoint Reporting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>More Help</h6></li>
    <li><a class="dropdown-item" href="../articles/Howto.html">Howtos</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-screencasts" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-video"></span> Screencasts</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-screencasts">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Modeling</h6></li>
    <li><a class="external-link dropdown-item" href="https://vimeo.com/382859445">Individual and Population Simulations</a></li>
    <li><a class="external-link dropdown-item" href="https://vimeo.com/382860283">Model Deployment</a></li>
    <li><a class="external-link dropdown-item" href="https://vimeo.com/manage/videos/382829588">Naive-Pooled Parameter Estimation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other Tools</h6></li>
    <li><a class="external-link dropdown-item" href="https://vimeo.com/650643574">Tabula: Extracting Tabular Data from PDFs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fas fa-hat-wizard"></span> Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fas fa-rss"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/john-harrold/ubiquity/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="Titration_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="Titration_files/handsontable-6.2.2/handsontable.full.min.css" rel="stylesheet">
<script src="Titration_files/handsontable-6.2.2/handsontable.full.min.js"></script><script src="Titration_files/handsontable-6.2.2/all.min.js"></script><script src="Titration_files/numbro.languages-2.0.6/languages.min.js"></script><script src="Titration_files/chroma-1.3.3/chroma.min.js"></script><script src="Titration_files/sparkline-2.1.2/jquery.sparkline.min.js"></script><link href="Titration_files/rhandsontable-0.3.7/rhandsontable.css" rel="stylesheet">
<script src="Titration_files/rhandsontable-binding-0.3.8/rhandsontable.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Titration/Rule-Based Simulations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/john-harrold/ubiquity/blob/HEAD/vignettes/Titration.Rmd" class="external-link"><code>vignettes/Titration.Rmd</code></a></small>
      <div class="d-none name"><code>Titration.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In the Simulation vignette several examples are provided using fixed
dosing regimens. This works well for compounds that are relatively safe,
the PK is consistent over time, and for which the drug concentrations
required to achieve efficacy are consistent. In fact these restrictions
apply to many different compounds. However, there are many scenarios
where it is necessary to adjust dosing based on periodic clinical
visits: compounds with a narrow therapeutic index, disease progression
which alters the drug PK or requires increases in the dose amount, etc.
While it is possible to do this manually with the current simulation
tools provided, this section outlines a generalized framework to make
this easier for the users. The <a href="https://github.com/john-harrold/ubiquity-pkpd/raw/refs/heads/master/download/ubiquity_workshop.zip" class="external-link">workshop</a>
provides several examples of running titration or rule-based
simulations. To make a copy of these scripts and other supporting files
in the current working directory run the following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r.ubiquity.tools">ubiquity</a></span><span class="op">)</span></span>
<span><span class="va">fr</span> <span class="op">=</span> <span class="fu"><a href="../reference/workshop_fetch.html">workshop_fetch</a></span><span class="op">(</span>section<span class="op">=</span><span class="st">"Titration"</span>, overwrite<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>This should provide you with the following scripts:</p>
<ul>
<li>
<a href="https://github.com/john-harrold/ubiquity/blob/master/inst/ubinc/scripts/analysis_repeat_dosing.r" class="external-link"><code>analysis_repeat_dosing.r</code></a>
- Implement fixed bolus dosing using the titration framework</li>
<li>
<a href="https://github.com/john-harrold/ubiquity/blob/master/inst/ubinc/scripts/analysis_repeat_infusion.r" class="external-link"><code>analysis_repeat_infusion.r</code></a>
- Implement fixed infusion rates using the titration framework</li>
<li>
<a href="https://github.com/john-harrold/ubiquity/blob/master/inst/ubinc/scripts/analysis_visit_dosing_titration.r" class="external-link"><code>analysis_visit_dosing_titration.r</code></a>
- Alter dosing based on predictions at specified time points
(individual)</li>
<li>
<a href="https://github.com/john-harrold/ubiquity/blob/master/inst/ubinc/scripts/analysis_visit_dosing_titration_stochastic.r" class="external-link"><code>analysis_visit_dosing_titration_stochastic.r</code></a>
- Alter dosing based on predictions at specified time points
(population)</li>
<li>
<a href="https://github.com/john-harrold/ubiquity/blob/master/inst/ubinc/scripts/analysis_state_reset.r" class="external-link"><code>analysis_state_reset.r</code></a>
- Combine multiple rules to dose the drug and perform a state reset</li>
</ul>
<p>Titration or rule-based simulations are run using the following
functions:</p>
<ul>
<li>
<code><a href="../reference/system_new_tt_rule.html">system_new_tt_rule()</a></code> - Defines a new rule and the times
when it is evaluated</li>
<li>
<code><a href="../reference/system_set_tt_cond.html">system_set_tt_cond()</a></code> - Adds a condition to a rule and
an associated action to perform when that condition is true</li>
<li>
<code><a href="../reference/run_simulation_titrate.html">run_simulation_titrate()</a></code> - Runs an individual
simulation using titration rules</li>
</ul>
</div>
<div class="section level2">
<h2 id="repeated-bolus-dosing-analysis_repeat_dosing-r">Repeated Bolus Dosing (<code>analysis_repeat_dosing.r</code>)<a class="anchor" aria-label="anchor" href="#repeated-bolus-dosing-analysis_repeat_dosing-r"></a>
</h2>
<p>This example shows how to implement a dosing regimen using both the
fixed-dosing methodologies and the titration functions above. This is
meant as a means to bridge these two concepts. First we use the same
model from the Simulation vignette (<a href="https://doi.org/10.4161/mabs.29095" class="external-link">Davda etal. mAbs, 6(4),
1094-1102</a>), and simulate five doses of 500 mg IV given every two
weeks:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/build_system.html">build_system</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_select_set.html">system_select_set</a></span><span class="op">(</span><span class="va">cfg</span>, <span class="st">"default"</span><span class="op">)</span></span>
<span><span class="va">parameters</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_fetch_parameters.html">system_fetch_parameters</a></span><span class="op">(</span><span class="va">cfg</span><span class="op">)</span></span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,group   <span class="op">=</span> <span class="st">"simulation"</span>, option <span class="op">=</span> <span class="st">"solver"</span>,       value <span class="op">=</span> <span class="st">"lsoda"</span><span class="op">)</span></span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group  <span class="op">=</span> <span class="st">"simulation"</span>, option <span class="op">=</span> <span class="st">"output_times"</span>,  <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10</span><span class="op">*</span><span class="fl">7</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_zero_inputs.html">system_zero_inputs</a></span><span class="op">(</span><span class="va">cfg</span><span class="op">)</span> </span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_bolus.html">system_set_bolus</a></span><span class="op">(</span><span class="va">cfg</span>, state   <span class="op">=</span> <span class="st">"Cc"</span>, </span>
<span>                            times   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">14</span>, <span class="fl">28</span>, <span class="fl">42</span>, <span class="fl">56</span><span class="op">)</span>,      </span>
<span>                            values  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">500</span>, <span class="fl">500</span>, <span class="fl">500</span>, <span class="fl">500</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">som_fix</span> <span class="op">=</span> <span class="fu"><a href="../reference/run_simulation_ubiquity.html">run_simulation_ubiquity</a></span><span class="op">(</span><span class="va">parameters</span>, <span class="va">cfg</span><span class="op">)</span></span></code></pre></div>
<p>To use rule-based control of the simulation we have to enable the
titration option:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>,</span>
<span>                      group       <span class="op">=</span> <span class="st">"titration"</span>,</span>
<span>                      option      <span class="op">=</span> <span class="st">"titrate"</span>,   </span>
<span>                      value       <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Next we need to define a rule using
<code><a href="../reference/system_new_tt_rule.html">system_new_tt_rule()</a></code>. A rule contains a set of times (and
the timescale) where we want to evaluate that rule. Here we create a
rule called <code>"ivdose"</code> and we evaluate this rule at weeks 0,
2, 4, 6 and 8. Any timescale defined using <code>&lt;TS:?&gt;</code> in
the system file can be used:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_new_tt_rule.html">system_new_tt_rule</a></span><span class="op">(</span><span class="va">cfg</span>,   </span>
<span>                       name       <span class="op">=</span> <span class="st">"ivdose"</span>,</span>
<span>                       times      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span><span class="op">)</span>,   </span>
<span>                       timescale  <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span></span></code></pre></div>
<p>Once a rule has been created you can attach conditions to that rule
using <code><a href="../reference/system_set_tt_cond.html">system_set_tt_cond()</a></code>. The name passed to this
function is the name of the rule to which this condition applies. The
<code>cond</code> argument is a string that will be evaluated
internally. You put any kind of Boolean argument you want here, or even
create a user definable function that returns a Boolean argument (eg,
<code>'myfunction(arguments)'</code>). When this condition evaluates as
true the string in <code>action</code> will be evaluated. The string
<code>SI_TT_BOLUS</code> is a prototype function used to modify dosing
at the titration points. See the help (<code><a href="../reference/system_set_tt_cond.html">?system_set_tt_cond</a></code>)
for details on prototype functions and the variables available in the
titration environment. This action will define the dosing into the
specified state (as defined by <code>&lt;B:?&gt;</code> in the system
file) with the values and times shown. The units here are those
specified in the system file and the times are relative to the titration
time point.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_tt_cond.html">system_set_tt_cond</a></span><span class="op">(</span><span class="va">cfg</span>,       </span>
<span>                       name       <span class="op">=</span> <span class="st">"ivdose"</span>,</span>
<span>                       cond       <span class="op">=</span> <span class="st">"TRUE"</span>,   </span>
<span>                       action     <span class="op">=</span> <span class="st">"SI_TT_BOLUS[state='Cc', values=500, times=0]"</span>,</span>
<span>                       value      <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span></span></code></pre></div>
<p>Next we simulate the system using the titration function:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">som_tt</span> <span class="op">=</span> <span class="fu"><a href="../reference/run_simulation_titrate.html">run_simulation_titrate</a></span><span class="op">(</span><span class="va">parameters</span>, <span class="va">cfg</span><span class="op">)</span></span></code></pre></div>
<p>Now we can overlay the predictions using both methods to show that
they produce the same result:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">myfig</span> <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">som_fix</span><span class="op">$</span><span class="va">simout</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">ts.days</span>,   y<span class="op">=</span><span class="va">Cc</span>, color<span class="op">=</span><span class="st">"Fixed Dosing"</span><span class="op">)</span>, linetype<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">som_tt</span><span class="op">$</span><span class="va">simout</span>,  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">ts.days</span>,   y<span class="op">=</span><span class="va">Cc</span>, color<span class="op">=</span><span class="st">"Titration"</span>   <span class="op">)</span>, linetype<span class="op">=</span><span class="fl">2</span><span class="op">)</span>  <span class="op">+</span></span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_colour_manual</a></span><span class="op">(</span>values<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Fixed Dosing"</span><span class="op">=</span><span class="st">"darkblue"</span>, <span class="st">"Titration"</span><span class="op">=</span><span class="st">"firebrick3"</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span></span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">'bottom'</span><span class="op">)</span>     </span>
<span></span>
<span> <span class="va">myfig</span> <span class="op">=</span> <span class="fu"><a href="../reference/prepare_figure.html">prepare_figure</a></span><span class="op">(</span><span class="st">'present'</span>, <span class="va">myfig</span><span class="op">)</span> </span>
<span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">myfig</span><span class="op">)</span></span></code></pre></div>
<p><img src="Titration_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
<p>The output of <code><a href="../reference/run_simulation_titrate.html">run_simulation_titrate()</a></code> is similar to
that of <code><a href="../reference/run_simulation_ubiquity.html">run_simulation_ubiquity()</a></code> with two extra elements
in the list that is returned:</p>
<ul>
<li>
<code>titration</code> - A data frame with a row for each time
course output and the following columns for titration rule
<code>tname</code>:
<ul>
<li>
<code>tt.tname.value</code> - Value of the rule for the active
condition or -1 if not triggered</li>
<li>
<code>tt.tname.simtime</code> - Simulation time where the last
condition became active</li>
<li>
<code>tt.tname.timescale</code> - Simulation time in the time scale
the rule was specified in Each of these fields is</li>
</ul>
</li>
<li>
<code>titration_history</code> data frame which contains a summary
list of all of the titration events that were triggered.
<ul>
<li>
<code>tname</code> - Titration rule name</li>
<li>
<code>value</code> - Value of the rule for the active condition</li>
<li>
<code>simtime</code> - Simulation time where the last condition
became active</li>
<li>
<code>timescale</code> - Simulation time in the time scale the rule
was specified in</li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="repeated-infusions-analysis_repeat_infusion-r">Repeated Infusions (<code>analysis_repeat_infusion.r</code>)<a class="anchor" aria-label="anchor" href="#repeated-infusions-analysis_repeat_infusion-r"></a>
</h2>
<p>In this example we want to give a 30 minute infusion at 15 mg/min
every two weeks. Similar to the previous example we first do this using
the fixed dosing methods:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_zero_inputs.html">system_zero_inputs</a></span><span class="op">(</span><span class="va">cfg</span><span class="op">)</span> </span>
<span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_rate.html">system_set_rate</a></span><span class="op">(</span><span class="va">cfg</span>, rate    <span class="op">=</span> <span class="st">"Dinf"</span>, </span>
<span>                times   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">0</span>, <span class="fl">30</span>, <span class="fl">20160</span>, <span class="fl">20190</span>, <span class="fl">40320</span>, <span class="fl">40350</span>, <span class="fl">60480</span>, <span class="fl">60510</span>, <span class="fl">80640</span>, <span class="fl">80670</span><span class="op">)</span>,</span>
<span>                levels  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span> , <span class="fl">0</span>,    <span class="fl">15</span>,     <span class="fl">0</span>,    <span class="fl">15</span>,     <span class="fl">0</span>,    <span class="fl">15</span>,     <span class="fl">0</span>,    <span class="fl">15</span>,     <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">som_fix</span> <span class="op">=</span> <span class="fu"><a href="../reference/run_simulation_ubiquity.html">run_simulation_ubiquity</a></span><span class="op">(</span><span class="va">parameters</span>, <span class="va">cfg</span><span class="op">)</span></span></code></pre></div>
<p>Now to use the rule-based dosing we enable titration, create the rule
(<code>"ivdose"</code>) to hold the dosing times, and create the
conditions resulting in the dosing. This is all similar to the previous
example except we use the <code>SI_TT_RATE</code> prototype function.
The rate and the units of times and levels are the same as those
specified in the system file (<code>&lt;R:?&gt;</code>). The times here
are also relative to the titration time.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group <span class="op">=</span> <span class="st">"titration"</span>, option <span class="op">=</span> <span class="st">"titrate"</span>,        value     <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_new_tt_rule.html">system_new_tt_rule</a></span><span class="op">(</span><span class="va">cfg</span>, name <span class="op">=</span> <span class="st">"ivdose"</span>,    times  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span><span class="op">)</span>, timescale <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_tt_cond.html">system_set_tt_cond</a></span><span class="op">(</span><span class="va">cfg</span>,       </span>
<span>                       name       <span class="op">=</span> <span class="st">"ivdose"</span>,</span>
<span>                       cond       <span class="op">=</span> <span class="st">"TRUE"</span>,   </span>
<span>                       action     <span class="op">=</span> <span class="st">"SI_TT_RATE[rate='Dinf', times=c(0,30), levels=c(15,0)]"</span>,</span>
<span>                       value      <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">som_tt</span> <span class="op">=</span> <span class="fu"><a href="../reference/run_simulation_titrate.html">run_simulation_titrate</a></span><span class="op">(</span><span class="va">parameters</span>, <span class="va">cfg</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">myfig</span> <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">som_fix</span><span class="op">$</span><span class="va">simout</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">ts.days</span>,   y<span class="op">=</span><span class="va">Cc</span>, color<span class="op">=</span><span class="st">"Fixed Dosing"</span><span class="op">)</span>, linetype<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">som_tt</span><span class="op">$</span><span class="va">simout</span>,  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">ts.days</span>,   y<span class="op">=</span><span class="va">Cc</span>, color<span class="op">=</span><span class="st">"Titration"</span>   <span class="op">)</span>, linetype<span class="op">=</span><span class="fl">2</span><span class="op">)</span>  <span class="op">+</span></span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_colour_manual</a></span><span class="op">(</span>values<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Fixed Dosing"</span><span class="op">=</span><span class="st">"darkblue"</span>, <span class="st">"Titration"</span><span class="op">=</span><span class="st">"firebrick3"</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span></span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">'bottom'</span><span class="op">)</span>     </span>
<span></span>
<span> <span class="va">myfig</span> <span class="op">=</span> <span class="fu"><a href="../reference/prepare_figure.html">prepare_figure</a></span><span class="op">(</span><span class="st">'present'</span>, <span class="va">myfig</span><span class="op">)</span> </span>
<span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">myfig</span><span class="op">)</span></span></code></pre></div>
<p><img src="Titration_files/figure-html/unnamed-chunk-20-1.png" width="672"></p>
</div>
<div class="section level2">
<h2 id="titrated-dosing-analysis_visit_dosing_titration-r">Titrated Dosing
(<code>analysis_visit_dosing_titration.r</code>)<a class="anchor" aria-label="anchor" href="#titrated-dosing-analysis_visit_dosing_titration-r"></a>
</h2>
<p>In the following example we want to administer a subcutaneous dose
(into <code>At</code>) every two weeks (<code>interval=14</code>) for 12
weeks. The dose level will be evaluated every 6 months. If the serum
concentration (Cc) is less than 900, we will dose at 700 mg. If Cc it is
greater than 900 we dose at 600 mg. The relevant code to implement this
are shown below:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_new_tt_rule.html">system_new_tt_rule</a></span><span class="op">(</span><span class="va">cfg</span>,   </span>
<span>    name       <span class="op">=</span> <span class="st">"ivdose"</span>,</span>
<span>    times      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">18</span>, <span class="fl">24</span><span class="op">)</span>,   </span>
<span>    timescale  <span class="op">=</span> <span class="st">"months"</span><span class="op">)</span></span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_tt_cond.html">system_set_tt_cond</a></span><span class="op">(</span><span class="va">cfg</span>,       </span>
<span>    name   <span class="op">=</span> <span class="st">"ivdose"</span>,</span>
<span>    cond   <span class="op">=</span> <span class="st">"Cc &lt; 900"</span>,   </span>
<span>    action <span class="op">=</span> <span class="st">"SI_TT_BOLUS[state='At', values=700, times=0, repdose='last', number=11, interval=14]"</span>,</span>
<span>    value  <span class="op">=</span> <span class="st">"700"</span><span class="op">)</span></span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_tt_cond.html">system_set_tt_cond</a></span><span class="op">(</span><span class="va">cfg</span>,       </span>
<span>    name   <span class="op">=</span> <span class="st">"ivdose"</span>,</span>
<span>    cond   <span class="op">=</span> <span class="st">"Cc &gt; 900"</span>,   </span>
<span>    action <span class="op">=</span> <span class="st">"SI_TT_BOLUS[state='At', values=600, times=0, repdose='last', number=11, interval=14]"</span>,</span>
<span>    value  <span class="op">=</span> <span class="st">"600"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">som_tt</span> <span class="op">=</span> <span class="fu"><a href="../reference/run_simulation_titrate.html">run_simulation_titrate</a></span><span class="op">(</span><span class="va">parameters</span>, <span class="va">cfg</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myfig</span> <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">som_tt</span><span class="op">$</span><span class="va">simout</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">ts.weeks</span>,   y<span class="op">=</span><span class="va">Cc</span><span class="op">)</span>, color<span class="op">=</span><span class="st">"blue"</span><span class="op">)</span>  </span>
<span><span class="va">myfig</span> <span class="op">=</span> <span class="fu"><a href="../reference/prepare_figure.html">prepare_figure</a></span><span class="op">(</span><span class="st">'present'</span>, <span class="va">myfig</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">myfig</span><span class="op">)</span></span></code></pre></div>
<p><img src="Titration_files/figure-html/unnamed-chunk-25-1.png" width="672"></p>
<p>Initially the concentration in the serum is 0
(<code>Cc &lt; 900</code>), so dosing starts at 700. After six months
the titration rule is triggered again. At this point the serum
concentration is greater greater than 900 so the dose level is reduced
to 600. All subsequent measurements are greater than 900 so the dose
remains at 600.</p>
<p><em>Titration output: som_tt$titration</em></p>
<div id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:550px;height:432.632880098888px;" class="rhandsontable html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"data":[{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0},{"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0}],"rClass":"data.frame","rColClasses":{"tt.ivdose.value":"numeric","tt.ivdose.simtime":"numeric","tt.ivdose.timescale":"numeric"},"rColnames":["tt.ivdose.value","tt.ivdose.simtime","tt.ivdose.timescale"],"rColHeaders":["tt.ivdose.value","tt.ivdose.simtime","tt.ivdose.timescale"],"rRowHeaders":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],"rDataDim":[100,3],"selectCallback":false,"colHeaders":["tt.ivdose.value","tt.ivdose.simtime","tt.ivdose.timescale"],"rowHeaders":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],"columns":[{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null}],"width":550,"height":null,"debug":0,"search":false,"stretchH":"none","comments":false,"contextMenu":{"items":{"row_above":[],"row_below":[],"remove_row":[],"hsep3":{"name":"---------"},"undo":[],"redo":[],"hsep4":{"name":"---------"},"alignment":[]}}},"evals":["columns.0.renderer","columns.1.renderer","columns.2.renderer"],"jsHooks":[]}</script><p><em>Titration output: som_tt$titration_history</em></p>
<div id="htmlwidget-e5c8c404fe174e4c81bd" style="width:550px;height:432.632880098888px;" class="rhandsontable html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"data":[{"tname":"ivdose","value":"700","simtime":"0","timescale":"0"},{"tname":"ivdose","value":"600","simtime":"168","timescale":"6"},{"tname":"ivdose","value":"600","simtime":"336","timescale":"12"},{"tname":"ivdose","value":"600","simtime":"504","timescale":"18"},{"tname":"ivdose","value":"600","simtime":"672","timescale":"24"}],"rClass":"data.frame","rColClasses":{"tname":"character","value":"character","simtime":"character","timescale":"character"},"rColnames":["tname","value","simtime","timescale"],"rColHeaders":["tname","value","simtime","timescale"],"rRowHeaders":null,"rDataDim":[5,4],"selectCallback":false,"colHeaders":["tname","value","simtime","timescale"],"rowHeaders":["1","2","3","4","5"],"columns":[{"type":"text","renderer":"customRenderer","default":null},{"type":"text","renderer":"customRenderer","default":null},{"type":"text","renderer":"customRenderer","default":null},{"type":"text","renderer":"customRenderer","default":null}],"width":550,"height":null,"debug":0,"search":false,"stretchH":"none","comments":false,"contextMenu":{"items":{"row_above":[],"row_below":[],"remove_row":[],"hsep3":{"name":"---------"},"undo":[],"redo":[],"hsep4":{"name":"---------"},"alignment":[]}}},"evals":["columns.0.renderer","columns.1.renderer","columns.2.renderer","columns.3.renderer"],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="monte-carlo-simulations-analysis_visit_dosing_titration_stochastic-r">Monte Carlo Simulations
(<code>analysis_visit_dosing_titration_stochastic.r</code>)<a class="anchor" aria-label="anchor" href="#monte-carlo-simulations-analysis_visit_dosing_titration_stochastic-r"></a>
</h2>
<p>This example is similar to the last except here we are performing
population simulations (20 subjects). The same function
(<code><a href="../reference/simulate_subjects.html">simulate_subjects()</a></code>) is used but setting the
<code>'titrate'</code> option to <code>TRUE</code> tells that function
to use the rule-based dosing.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span> <span class="op">=</span> <span class="fu"><a href="../reference/system_set_option.html">system_set_option</a></span><span class="op">(</span><span class="va">cfg</span>, group<span class="op">=</span><span class="st">"stochastic"</span>, option<span class="op">=</span><span class="st">"nsub"</span>,    value<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="va">som</span><span class="op">=</span> <span class="fu"><a href="../reference/simulate_subjects.html">simulate_subjects</a></span><span class="op">(</span><span class="va">parameters</span>, <span class="va">cfg</span><span class="op">)</span></span></code></pre></div>
<p>This will add a data a list element called <code>som$titration</code>
with three fields for each titration rule (<code>tname</code>):</p>
<ul>
<li>
<code>tt.tname.value</code> - Value of the rule for the active
condition</li>
<li>
<code>tt.tname.simtime</code> - Simulation time where the last
condition became active</li>
<li>
<code>tt.tname.timescale</code> - Simulation time in the time scale
the rule was specified in</li>
</ul>
<p>Each of these fields is a matrix with an entry for each simulation
time (column) and each subject (row). In this example these would be
accessed through the following list elements:</p>
<ul>
<li><em><code>som$titration$tt.ivdose.simtime</code></em></li>
<li>
<em><code>som$titration$tt.ivdose.value</code></em><br>
</li>
<li><em><code>som$titration$tt.ivdose.timescaletimescale</code></em></li>
</ul>
<p>This data structure (<code>som</code>) can be collapsed down to a
data frame using the <code>som_to_df</code> function. With titration
simulations a column is added for each rule giving the value of that
rule at the indicated time (the first 100 rows are shown):</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sdf</span> <span class="op">=</span> <span class="fu"><a href="../reference/som_to_df.html">som_to_df</a></span><span class="op">(</span><span class="va">cfg</span>, <span class="va">som</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-36aa3d2a04d42bbc2145" style="width:600px;height:300px;" class="rhandsontable html-widget"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"data":[{"ID":1,"ts.min":0.2419,"ts.days":0.0002,"ts.hours":0.004,"ts.weeks":0,"ts.months":6e-06,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4999.6227,"names":"At"},{"ID":1,"ts.min":12.096,"ts.days":0.0084,"ts.hours":0.2016,"ts.weeks":0.0012,"ts.months":0.0003,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4981.1691,"names":"At"},{"ID":1,"ts.min":24.192,"ts.days":0.0168,"ts.hours":0.4032,"ts.weeks":0.0024,"ts.months":0.0006,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4962.4092,"names":"At"},{"ID":1,"ts.min":36.288,"ts.days":0.0252,"ts.hours":0.6048,"ts.weeks":0.0036,"ts.months":0.0009,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4943.7199,"names":"At"},{"ID":1,"ts.min":641.088,"ts.days":0.4452,"ts.hours":10.6848,"ts.weeks":0.0636,"ts.months":0.0159,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4093.7187,"names":"At"},{"ID":1,"ts.min":1245.888,"ts.days":0.8652,"ts.hours":20.7648,"ts.weeks":0.1236,"ts.months":0.0309,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":3389.863,"names":"At"},{"ID":1,"ts.min":1850.688,"ts.days":1.2852,"ts.hours":30.8448,"ts.weeks":0.1836,"ts.months":0.0459,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2807.0252,"names":"At"},{"ID":1,"ts.min":2455.488,"ts.days":1.7052,"ts.hours":40.9248,"ts.weeks":0.2436,"ts.months":0.0609,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2324.3977,"names":"At"},{"ID":1,"ts.min":3060.288,"ts.days":2.1252,"ts.hours":51.0048,"ts.weeks":0.3036,"ts.months":0.0759,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":1924.7511,"names":"At"},{"ID":1,"ts.min":3665.088,"ts.days":2.5452,"ts.hours":61.0848,"ts.weeks":0.3636,"ts.months":0.0909,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":1593.818,"names":"At"},{"ID":1,"ts.min":4269.888,"ts.days":2.9652,"ts.hours":71.1648,"ts.weeks":0.4236,"ts.months":0.1059,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":1319.784,"names":"At"},{"ID":1,"ts.min":4874.688,"ts.days":3.3852,"ts.hours":81.2448,"ts.weeks":0.4836,"ts.months":0.1209,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":1092.8661,"names":"At"},{"ID":1,"ts.min":5479.488,"ts.days":3.8052,"ts.hours":91.3248,"ts.weeks":0.5436,"ts.months":0.1359,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":904.9635,"names":"At"},{"ID":1,"ts.min":6084.288,"ts.days":4.2252,"ts.hours":101.4048,"ts.weeks":0.6036,"ts.months":0.1509,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":749.368,"names":"At"},{"ID":1,"ts.min":6689.088,"ts.days":4.6452,"ts.hours":111.4848,"ts.weeks":0.6636,"ts.months":0.1659,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":620.525,"names":"At"},{"ID":1,"ts.min":7293.888,"ts.days":5.0652,"ts.hours":121.5648,"ts.weeks":0.7236,"ts.months":0.1809,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":513.8346,"names":"At"},{"ID":1,"ts.min":7898.688,"ts.days":5.4852,"ts.hours":131.6448,"ts.weeks":0.7836,"ts.months":0.1959,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":425.4881,"names":"At"},{"ID":1,"ts.min":8503.488,"ts.days":5.9052,"ts.hours":141.7248,"ts.weeks":0.8436,"ts.months":0.2109,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":352.3316,"names":"At"},{"ID":1,"ts.min":9108.288,"ts.days":6.3252,"ts.hours":151.8048,"ts.weeks":0.9036,"ts.months":0.2259,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":291.7532,"names":"At"},{"ID":1,"ts.min":9713.088,"ts.days":6.7452,"ts.hours":161.8848,"ts.weeks":0.9636,"ts.months":0.2409,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":241.5905,"names":"At"},{"ID":1,"ts.min":10317.888,"ts.days":7.1652,"ts.hours":171.9648,"ts.weeks":1.0236,"ts.months":0.2559,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":200.0525,"names":"At"},{"ID":1,"ts.min":10922.688,"ts.days":7.5852,"ts.hours":182.0448,"ts.weeks":1.0836,"ts.months":0.2709,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":165.6563,"names":"At"},{"ID":1,"ts.min":11520,"ts.days":8,"ts.hours":192,"ts.weeks":1.1429,"ts.months":0.2857,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":137.4949,"names":"At"},{"ID":1,"ts.min":11527.488,"ts.days":8.0052,"ts.hours":192.1248,"ts.weeks":1.1436,"ts.months":0.2859,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":137.1741,"names":"At"},{"ID":1,"ts.min":12132.288,"ts.days":8.4252,"ts.hours":202.2048,"ts.weeks":1.2036,"ts.months":0.3009,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":113.589,"names":"At"},{"ID":1,"ts.min":12737.088,"ts.days":8.8452,"ts.hours":212.2848,"ts.weeks":1.2636,"ts.months":0.3159,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":94.059,"names":"At"},{"ID":1,"ts.min":13341.888,"ts.days":9.2652,"ts.hours":222.3648,"ts.weeks":1.3236,"ts.months":0.3309,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":77.8869,"names":"At"},{"ID":1,"ts.min":13946.688,"ts.days":9.6852,"ts.hours":232.4448,"ts.weeks":1.3836,"ts.months":0.3459,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":64.4954,"names":"At"},{"ID":1,"ts.min":14551.488,"ts.days":10.1052,"ts.hours":242.5248,"ts.weeks":1.4436,"ts.months":0.3609,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":53.4063,"names":"At"},{"ID":1,"ts.min":15156.288,"ts.days":10.5252,"ts.hours":252.6048,"ts.weeks":1.5036,"ts.months":0.3759,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":44.2239,"names":"At"},{"ID":1,"ts.min":15761.088,"ts.days":10.9452,"ts.hours":262.6848,"ts.weeks":1.5636,"ts.months":0.3909,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":36.6202,"names":"At"},{"ID":1,"ts.min":16365.888,"ts.days":11.3652,"ts.hours":272.7648,"ts.weeks":1.6236,"ts.months":0.4059,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":30.3239,"names":"At"},{"ID":1,"ts.min":16970.688,"ts.days":11.7852,"ts.hours":282.8448,"ts.weeks":1.6836,"ts.months":0.4209,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":25.1101,"names":"At"},{"ID":1,"ts.min":17575.488,"ts.days":12.2052,"ts.hours":292.9248,"ts.weeks":1.7436,"ts.months":0.4359,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":20.7928,"names":"At"},{"ID":1,"ts.min":18180.288,"ts.days":12.6252,"ts.hours":303.0048,"ts.weeks":1.8036,"ts.months":0.4509,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":17.2178,"names":"At"},{"ID":1,"ts.min":18785.088,"ts.days":13.0452,"ts.hours":313.0848,"ts.weeks":1.8636,"ts.months":0.4659,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":14.2574,"names":"At"},{"ID":1,"ts.min":19389.888,"ts.days":13.4652,"ts.hours":323.1648,"ts.weeks":1.9236,"ts.months":0.4809,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":11.8061,"names":"At"},{"ID":1,"ts.min":19994.688,"ts.days":13.8852,"ts.hours":333.2448,"ts.weeks":1.9836,"ts.months":0.4959,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":9.7762,"names":"At"},{"ID":1,"ts.min":20159.7581,"ts.days":13.9998,"ts.hours":335.996,"ts.weeks":2,"ts.months":0.5,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":9.2855,"names":"At"},{"ID":1,"ts.min":20160,"ts.days":14,"ts.hours":336,"ts.weeks":2,"ts.months":0.5,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":9.2848,"names":"At"},{"ID":1,"ts.min":20160.2419,"ts.days":14.0002,"ts.hours":336.004,"ts.weeks":2,"ts.months":0.5,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":5008.9068,"names":"At"},{"ID":1,"ts.min":20172.096,"ts.days":14.0084,"ts.hours":336.2016,"ts.weeks":2.0012,"ts.months":0.5003,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4990.4189,"names":"At"},{"ID":1,"ts.min":20184.192,"ts.days":14.0168,"ts.hours":336.4032,"ts.weeks":2.0024,"ts.months":0.5006,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4971.624,"names":"At"},{"ID":1,"ts.min":20196.288,"ts.days":14.0252,"ts.hours":336.6048,"ts.weeks":2.0036,"ts.months":0.5009,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4952.8999,"names":"At"},{"ID":1,"ts.min":20599.488,"ts.days":14.3052,"ts.hours":343.3248,"ts.weeks":2.0436,"ts.months":0.5109,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4367.5288,"names":"At"},{"ID":1,"ts.min":20801.088,"ts.days":14.4452,"ts.hours":346.6848,"ts.weeks":2.0636,"ts.months":0.5159,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4101.3216,"names":"At"},{"ID":1,"ts.min":21204.288,"ts.days":14.7252,"ts.hours":353.4048,"ts.weeks":2.1036,"ts.months":0.5259,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":3616.5952,"names":"At"},{"ID":1,"ts.min":21405.888,"ts.days":14.8652,"ts.hours":356.7648,"ts.weeks":2.1236,"ts.months":0.5309,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":3396.1584,"names":"At"},{"ID":1,"ts.min":21809.088,"ts.days":15.1452,"ts.hours":363.4848,"ts.weeks":2.1636,"ts.months":0.5409,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2994.7722,"names":"At"},{"ID":1,"ts.min":22010.688,"ts.days":15.2852,"ts.hours":366.8448,"ts.weeks":2.1836,"ts.months":0.5459,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2812.2367,"names":"At"},{"ID":1,"ts.min":22413.888,"ts.days":15.5652,"ts.hours":373.5648,"ts.weeks":2.2236,"ts.months":0.5559,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2479.8672,"names":"At"},{"ID":1,"ts.min":22615.488,"ts.days":15.7052,"ts.hours":376.9248,"ts.weeks":2.2436,"ts.months":0.5609,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2328.7152,"names":"At"},{"ID":1,"ts.min":23018.688,"ts.days":15.9852,"ts.hours":383.6448,"ts.weeks":2.2836,"ts.months":0.5709,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2053.4894,"names":"At"},{"ID":1,"ts.min":23040,"ts.days":16,"ts.hours":384,"ts.weeks":2.2857,"ts.months":0.5714,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2039.8828,"names":"At"},{"ID":1,"ts.min":23220.288,"ts.days":16.1252,"ts.hours":387.0048,"ts.weeks":2.3036,"ts.months":0.5759,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":1928.3264,"names":"At"},{"ID":1,"ts.min":23623.488,"ts.days":16.4052,"ts.hours":393.7248,"ts.weeks":2.3436,"ts.months":0.5859,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":1700.4218,"names":"At"},{"ID":1,"ts.min":23825.088,"ts.days":16.5452,"ts.hours":397.0848,"ts.weeks":2.3636,"ts.months":0.5909,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":1596.7787,"names":"At"},{"ID":1,"ts.min":24228.288,"ts.days":16.8252,"ts.hours":403.8048,"ts.weeks":2.4036,"ts.months":0.6009,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":1408.059,"names":"At"},{"ID":1,"ts.min":24429.888,"ts.days":16.9652,"ts.hours":407.1648,"ts.weeks":2.4236,"ts.months":0.6059,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":1322.2358,"names":"At"},{"ID":1,"ts.min":25034.688,"ts.days":17.3852,"ts.hours":417.2448,"ts.weeks":2.4836,"ts.months":0.6209,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":1094.8967,"names":"At"},{"ID":1,"ts.min":25639.488,"ts.days":17.8052,"ts.hours":427.3248,"ts.weeks":2.5436,"ts.months":0.6359,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":906.6448,"names":"At"},{"ID":1,"ts.min":26244.288,"ts.days":18.2252,"ts.hours":437.4048,"ts.weeks":2.6036,"ts.months":0.6509,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":750.7601,"names":"At"},{"ID":1,"ts.min":26849.088,"ts.days":18.6452,"ts.hours":447.4848,"ts.weeks":2.6636,"ts.months":0.6659,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":621.6778,"names":"At"},{"ID":1,"ts.min":27453.888,"ts.days":19.0652,"ts.hours":457.5648,"ts.weeks":2.7236,"ts.months":0.6809,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":514.7892,"names":"At"},{"ID":1,"ts.min":28058.688,"ts.days":19.4852,"ts.hours":467.6448,"ts.weeks":2.7836,"ts.months":0.6959,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":426.2787,"names":"At"},{"ID":1,"ts.min":28663.488,"ts.days":19.9052,"ts.hours":477.7248,"ts.weeks":2.8436,"ts.months":0.7109,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":352.9862,"names":"At"},{"ID":1,"ts.min":29268.288,"ts.days":20.3252,"ts.hours":487.8048,"ts.weeks":2.9036,"ts.months":0.7259,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":292.2953,"names":"At"},{"ID":1,"ts.min":29873.088,"ts.days":20.7452,"ts.hours":497.8848,"ts.weeks":2.9636,"ts.months":0.7409,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":242.0393,"names":"At"},{"ID":1,"ts.min":30477.888,"ts.days":21.1652,"ts.hours":507.9648,"ts.weeks":3.0236,"ts.months":0.7559,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":200.4241,"names":"At"},{"ID":1,"ts.min":31082.688,"ts.days":21.5852,"ts.hours":518.0448,"ts.weeks":3.0836,"ts.months":0.7709,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":165.9641,"names":"At"},{"ID":1,"ts.min":31687.488,"ts.days":22.0052,"ts.hours":528.1248,"ts.weeks":3.1436,"ts.months":0.7859,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":137.4289,"names":"At"},{"ID":1,"ts.min":32292.288,"ts.days":22.4252,"ts.hours":538.2048,"ts.weeks":3.2036,"ts.months":0.8009,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":113.8,"names":"At"},{"ID":1,"ts.min":32897.088,"ts.days":22.8452,"ts.hours":548.2848,"ts.weeks":3.2636,"ts.months":0.8159,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":94.2337,"names":"At"},{"ID":1,"ts.min":33501.888,"ts.days":23.2652,"ts.hours":558.3648,"ts.weeks":3.3236,"ts.months":0.8309,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":78.0316,"names":"At"},{"ID":1,"ts.min":34106.688,"ts.days":23.6852,"ts.hours":568.4448,"ts.weeks":3.3836,"ts.months":0.8459,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":64.6152,"names":"At"},{"ID":1,"ts.min":34560,"ts.days":24,"ts.hours":576,"ts.weeks":3.4286,"ts.months":0.8571,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":56.0947,"names":"At"},{"ID":1,"ts.min":34711.488,"ts.days":24.1052,"ts.hours":578.5248,"ts.weeks":3.4436,"ts.months":0.8609,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":53.5055,"names":"At"},{"ID":1,"ts.min":35316.288,"ts.days":24.5252,"ts.hours":588.6048,"ts.weeks":3.5036,"ts.months":0.8759,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":44.306,"names":"At"},{"ID":1,"ts.min":35921.088,"ts.days":24.9452,"ts.hours":598.6848,"ts.weeks":3.5636,"ts.months":0.8909,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":36.6882,"names":"At"},{"ID":1,"ts.min":36525.888,"ts.days":25.3652,"ts.hours":608.7648,"ts.weeks":3.6236,"ts.months":0.9059,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":30.3802,"names":"At"},{"ID":1,"ts.min":37130.688,"ts.days":25.7852,"ts.hours":618.8448,"ts.weeks":3.6836,"ts.months":0.9209,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":25.1568,"names":"At"},{"ID":1,"ts.min":37735.488,"ts.days":26.2052,"ts.hours":628.9248,"ts.weeks":3.7436,"ts.months":0.9359,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":20.8314,"names":"At"},{"ID":1,"ts.min":38340.288,"ts.days":26.6252,"ts.hours":639.0048,"ts.weeks":3.8036,"ts.months":0.9509,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":17.2498,"names":"At"},{"ID":1,"ts.min":38945.088,"ts.days":27.0452,"ts.hours":649.0848,"ts.weeks":3.8636,"ts.months":0.9659,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":14.2839,"names":"At"},{"ID":1,"ts.min":39549.888,"ts.days":27.4652,"ts.hours":659.1648,"ts.weeks":3.9236,"ts.months":0.9809,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":11.828,"names":"At"},{"ID":1,"ts.min":40154.688,"ts.days":27.8852,"ts.hours":669.2448,"ts.weeks":3.9836,"ts.months":0.9959,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":9.7944,"names":"At"},{"ID":1,"ts.min":40319.7581,"ts.days":27.9998,"ts.hours":671.996,"ts.weeks":4,"ts.months":1,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":9.3028,"names":"At"},{"ID":1,"ts.min":40320,"ts.days":28,"ts.hours":672,"ts.weeks":4,"ts.months":1,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":9.3021,"names":"At"},{"ID":1,"ts.min":40320.2419,"ts.days":28.0002,"ts.hours":672.004,"ts.weeks":4,"ts.months":1,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":5008.9241,"names":"At"},{"ID":1,"ts.min":40332.096,"ts.days":28.0084,"ts.hours":672.2016,"ts.weeks":4.0012,"ts.months":1.0003,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4990.4361,"names":"At"},{"ID":1,"ts.min":40344.192,"ts.days":28.0168,"ts.hours":672.4032,"ts.weeks":4.0024,"ts.months":1.0006,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4971.641,"names":"At"},{"ID":1,"ts.min":40356.288,"ts.days":28.0252,"ts.hours":672.6048,"ts.weeks":4.0036,"ts.months":1.0009,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4952.9169,"names":"At"},{"ID":1,"ts.min":40759.488,"ts.days":28.3052,"ts.hours":679.3248,"ts.weeks":4.0436,"ts.months":1.0109,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4367.5441,"names":"At"},{"ID":1,"ts.min":40961.088,"ts.days":28.4452,"ts.hours":682.6848,"ts.weeks":4.0636,"ts.months":1.0159,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":4101.3361,"names":"At"},{"ID":1,"ts.min":41364.288,"ts.days":28.7252,"ts.hours":689.4048,"ts.weeks":4.1036,"ts.months":1.0259,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":3616.6078,"names":"At"},{"ID":1,"ts.min":41565.888,"ts.days":28.8652,"ts.hours":692.7648,"ts.weeks":4.1236,"ts.months":1.0309,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":3396.1703,"names":"At"},{"ID":1,"ts.min":41969.088,"ts.days":29.1452,"ts.hours":699.4848,"ts.weeks":4.1636,"ts.months":1.0409,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2994.7826,"names":"At"},{"ID":1,"ts.min":42170.688,"ts.days":29.2852,"ts.hours":702.8448,"ts.weeks":4.1836,"ts.months":1.0459,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2812.2442,"names":"At"},{"ID":1,"ts.min":42573.888,"ts.days":29.5652,"ts.hours":709.5648,"ts.weeks":4.2236,"ts.months":1.0559,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2479.8734,"names":"At"},{"ID":1,"ts.min":42775.488,"ts.days":29.7052,"ts.hours":712.9248,"ts.weeks":4.2436,"ts.months":1.0609,"tt.ivdose.value":700,"tt.ivdose.simtime":0,"tt.ivdose.timescale":0,"F1":0.744,"ka":0.4492,"CL":0.2844,"Vc":2.9885,"Vp":4.1883,"Q":0.3247,"MW":140,"pred":2328.7254,"names":"At"}],"rClass":"data.frame","rColClasses":{"ID":"integer","ts.min":"numeric","ts.days":"numeric","ts.hours":"numeric","ts.weeks":"numeric","ts.months":"numeric","tt.ivdose.value":"numeric","tt.ivdose.simtime":"numeric","tt.ivdose.timescale":"numeric","F1":"numeric","ka":"numeric","CL":"numeric","Vc":"numeric","Vp":"numeric","Q":"numeric","MW":"numeric","pred":"numeric","names":"character"},"rColnames":["ID","ts.min","ts.days","ts.hours","ts.weeks","ts.months","tt.ivdose.value","tt.ivdose.simtime","tt.ivdose.timescale","F1","ka","CL","Vc","Vp","Q","MW","pred","names"],"rColHeaders":["ID","ts.min","ts.days","ts.hours","ts.weeks","ts.months","tt.ivdose.value","tt.ivdose.simtime","tt.ivdose.timescale","F1","ka","CL","Vc","Vp","Q","MW","pred","names"],"rRowHeaders":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],"rDataDim":[100,18],"selectCallback":false,"colHeaders":["ID","ts.min","ts.days","ts.hours","ts.weeks","ts.months","tt.ivdose.value","tt.ivdose.simtime","tt.ivdose.timescale","F1","ka","CL","Vc","Vp","Q","MW","pred","names"],"rowHeaders":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],"columns":[{"type":"numeric","numericFormat":{"pattern":"0"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"numeric","numericFormat":{"pattern":"0.00"},"renderer":"customRenderer","default":null},{"type":"text","renderer":"customRenderer","default":null}],"width":600,"height":300,"debug":0,"search":false,"stretchH":"none","comments":false,"contextMenu":{"items":{"row_above":[],"row_below":[],"remove_row":[],"hsep3":{"name":"---------"},"undo":[],"redo":[],"hsep4":{"name":"---------"},"alignment":[]}}},"evals":["columns.0.renderer","columns.1.renderer","columns.2.renderer","columns.3.renderer","columns.4.renderer","columns.5.renderer","columns.6.renderer","columns.7.renderer","columns.8.renderer","columns.9.renderer","columns.10.renderer","columns.11.renderer","columns.12.renderer","columns.13.renderer","columns.14.renderer","columns.15.renderer","columns.16.renderer","columns.17.renderer"],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="performing-statecompartment-resets-analysis_state_reset-r">Performing State/Compartment Resets
(<code>analysis_state_reset.r</code>)<a class="anchor" aria-label="anchor" href="#performing-statecompartment-resets-analysis_state_reset-r"></a>
</h2>
<p>Along with changing dosing at titration time points, it may also be
necessary to directly alter state or compartment values. In this last
example we will dose every two weeks and on week 3 we will drop the
total drug in the system by 1/2.</p>
<p>This portion covers the IV dosing component:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_new_tt_rule.html">system_new_tt_rule</a></span><span class="op">(</span><span class="va">cfg</span>,   </span>
<span>                       name       <span class="op">=</span> <span class="st">"ivdose"</span>,</span>
<span>                       times      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span><span class="op">)</span>,   </span>
<span>                       timescale  <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span></span>
<span>                                  </span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_tt_cond.html">system_set_tt_cond</a></span><span class="op">(</span><span class="va">cfg</span>,       </span>
<span>                       name       <span class="op">=</span> <span class="st">"ivdose"</span>,</span>
<span>                       cond       <span class="op">=</span> <span class="st">'TRUE'</span>,   </span>
<span>                       action     <span class="op">=</span> <span class="st">"SI_TT_BOLUS[state='Cc', values=500, times=0]"</span>,</span>
<span>                       value      <span class="op">=</span> <span class="st">"5"</span><span class="op">)</span></span></code></pre></div>
<p>And this portion reduces the amount of drug in both <code>Cc</code>
and <code>Cp</code> by 1/2 at week 3:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_new_tt_rule.html">system_new_tt_rule</a></span><span class="op">(</span><span class="va">cfg</span>,   </span>
<span>                       name       <span class="op">=</span> <span class="st">"state_reset"</span>,</span>
<span>                       times      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>,   </span>
<span>                       timescale  <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span></span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_tt_cond.html">system_set_tt_cond</a></span><span class="op">(</span><span class="va">cfg</span>,       </span>
<span>                       name       <span class="op">=</span> <span class="st">"state_reset"</span>,</span>
<span>                       cond       <span class="op">=</span> <span class="st">'TRUE'</span>, </span>
<span>                       action     <span class="op">=</span> <span class="st">"SI_TT_STATE[Cc][0.5*Cc]"</span>,</span>
<span>                       value      <span class="op">=</span> <span class="st">"0"</span><span class="op">)</span>                              </span>
<span><span class="va">cfg</span><span class="op">=</span><span class="fu"><a href="../reference/system_set_tt_cond.html">system_set_tt_cond</a></span><span class="op">(</span><span class="va">cfg</span>,       </span>
<span>                       name       <span class="op">=</span> <span class="st">"state_reset"</span>,</span>
<span>                       cond       <span class="op">=</span> <span class="st">'TRUE'</span>, </span>
<span>                       action     <span class="op">=</span> <span class="st">"SI_TT_STATE[Cp][0.5*Cp]"</span>,</span>
<span>                       value      <span class="op">=</span> <span class="st">"0"</span><span class="op">)</span>                              </span>
<span><span class="va">som_tt</span> <span class="op">=</span> <span class="fu"><a href="../reference/run_simulation_titrate.html">run_simulation_titrate</a></span><span class="op">(</span><span class="va">parameters</span>, <span class="va">cfg</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myfig</span> <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">som_tt</span><span class="op">$</span><span class="va">simout</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">ts.weeks</span>,   y<span class="op">=</span><span class="va">Cc</span><span class="op">)</span>, color<span class="op">=</span><span class="st">"red"</span><span class="op">)</span>  </span>
<span><span class="va">myfig</span> <span class="op">=</span> <span class="fu"><a href="../reference/prepare_figure.html">prepare_figure</a></span><span class="op">(</span><span class="st">'present'</span>, <span class="va">myfig</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">myfig</span><span class="op">)</span></span></code></pre></div>
<p><img src="Titration_files/figure-html/unnamed-chunk-38-1.png" width="672"></p>
</div>
<div class="section level2">
<h2 id="contents-of-system-txt">Contents of <code>system.txt</code><a class="anchor" aria-label="anchor" href="#contents-of-system-txt"></a>
</h2>
<pre><code># Implementation of the two compartment model from Davda 2014
#
#   Davda, J. P., Dodds, M. G., Gibbs, M. A., Wisdom, W., &amp; Gibbs, J. (2014). A
#   model-based meta-analysis of monoclonal antibody pharmacokinetics to guide
#   optimal first-in-human study design. mAbs, 6(4), 1094-1102.
#   http://doi.org/10.4161/mabs.29095
#
# System Units:
#   mass          [=] nmoles
#   volume        [=] L
#   concentration [=] nM
#   time          [=] day
#

# #-------------#
# | Parameters  |
# #-------------#
# System parameters
#name          value          lower  upper    units  editable grouping
#                             bound  bound
&lt;P&gt; F1         0.744          eps    inf      ---    yes      System
&lt;P&gt; ka         0.282          eps    inf      1/day  yes      System
&lt;P&gt; CL         0.200          eps    inf      L/day  yes      System
&lt;P&gt; Vc         3.61           eps    inf      L      yes      System
&lt;P&gt; Vp         2.75           eps    inf      L      yes      System
&lt;P&gt; Q          0.747          eps    inf      L/day  yes      System
&lt;P&gt; MW         140            eps    inf      kD     yes      System
&lt;PSET:default&gt;  mAb in Humans

# Interindividual Variability
# Taken from Table 3
&lt;IIV:ETAka&gt;    0.416
&lt;IIV:ETAka:LN&gt; ka            

&lt;IIV:ETACL&gt;    0.09875        
&lt;IIV:ETACL:LN&gt; CL            

&lt;IIV:ETAVc&gt;    0.116          
&lt;IIV:ETAVc:LN&gt; Vc            

&lt;IIV:ETAVp&gt;    0.0789         
&lt;IIV:ETAVp:LN&gt; Vp            

&lt;IIV:ETAQ&gt;     0.699          
&lt;IIV:ETAQ:LN&gt;  Q            

&lt;IIVCOR:ETACL:ETAVc&gt;   0.0786  
&lt;IIVCOR:ETACL:ETAVp&gt;   0.0619 
&lt;IIVCOR:ETAVp:ETAVc&gt;   0.0377 

# Covariates
&lt;CV:DOSE&gt;    ; times;      [ 0 ];    day  
&lt;CV:DOSE&gt;    ; values;     [400];    mg
&lt;CVINTERP:DOSE&gt; step

&lt;CV:WT&gt;      ; times;      [ 0 ];    day  
&lt;CV:WT&gt;      ; values;     [ 60];    kg
&lt;CVINTERP:WT&gt; step

# static secondary parameters
&lt;As&gt; kel = CL/Vc
&lt;As&gt; kcp = Q/Vc
&lt;As&gt; kpc = Q/Vp

# #-------------------#
# |Input Information |
# #-------------------#
#
#        1e6 ng    1 nmole             1
# X mg x ------ x ----------------- x ---  =&gt;  X*1e3/MW/Vc
#        1 mg      MW (KDA) * 1000    V(L)
#
# Bolus Events
# times/events state   values              scale    units
&lt;B:times&gt;;           [  0.0, 7, 14 ];          1;   days
&lt;B:events&gt;;   At;    [400.0, 0, 0  ];     1e3/MW;   mg     
&lt;B:events&gt;;   Cc;    [  0.0, 0, 0  ];  1e3/MW/Vc;   mg     

&lt;R:Dinf&gt;;    times;     [0, 30];     1/60/24;           min 
&lt;R:Dinf&gt;;    levels;    [0,  0];       60*24*1e3/MW;    mg/min

# ODEs
&lt;ODE:At&gt; -ka*At
&lt;ODE:Cc&gt;  ka*At*F1/Vc  -kel*Cc - kcp*Cc  + kpc*Cp*Vp/Vc + Dinf/Vc 
&lt;ODE:Cp&gt;                                   kcp*Cc*Vc/Vp - kpc*Cp       
                                              
# #---------#
# | Outputs |
# #---------#
# Outputs that begin with QC will not be displayed in the GUI

# Convert nM to ng/ml  
#
#  X nM  ===&gt; X*MW(KDA) 
#
# Convert nM to ug/ml/mg(dose)
#
#  X nM  ===&gt; X*MW(KDA)/1000/dose
#
&lt;O&gt; C_ng_ml = Cc*MW
&lt;O&gt; C_DOSE  = Cc*MW/DOSE/1000


&lt;VP&gt; prop_err   0.1            eps    inf      --     yes      Variance
&lt;VP&gt; add_err    0.1            eps    inf      ng/ml  yes      Variance

&lt;EST:LT&gt; Vp; Vc; CL; Q; ka
&lt;EST:P&gt;  Vp; Vc; CL; Q; ka; add_err; prop_err
&lt;OE:C_ng_ml&gt; add=add_err; prop=prop_err
&lt;AMTIFY&gt; Cp; Ap; Vp

# #---------#
# | Options #
# #---------#
# General Options:
# specify different time scales
&lt;TS:min&gt;   24.0*60.0
&lt;TS:days&gt;  1.0
&lt;TS:hours&gt; 24.0
&lt;TS:weeks&gt; 1.0/7.0
&lt;TS:months&gt; 1.0/7.0/4.0</code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Harrold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
